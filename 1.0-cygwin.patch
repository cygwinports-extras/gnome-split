--- origsrc/gnome-split-1.0/configure	2010-11-18 09:54:42.000000000 -0600
+++ src/gnome-split-1.0/configure	2011-06-05 20:58:58.603521400 -0500
@@ -140,6 +140,8 @@ sub check_prereq(\@$$@) {
 			$str .= "pkgadd";
 		} elsif ($os eq "arch") {
 			$str .= "pacman -S"
+		} elsif ($os eq "cygwin") {
+			$str .= "setup.exe -P"
 		} else {
 			$str .= "[FIXME fetch and install command for this OS]"; 
 		}
@@ -453,6 +455,9 @@ if ((-f "/etc/gentoo-release") || (-f "/
 } elsif (-f "/etc/redhat-release") {
     output "RedHat";
     $os = "fedora";
+} elsif (-f "/usr/bin/cygwin1.dll") {
+    output "Cygwin";
+    $os = "cygwin";
 } elsif (-f "/etc/java/jpackage-release") {
     output "JPackage";
     $os = "fedora";
@@ -701,6 +706,36 @@ if ($os eq "gentoo") {
 		"Unix socket library",
 		"libunixsocket-java",
 		"/usr/share/java/unix.jar");
+} elsif ($os eq "cygwin") {
+	check_prereq(@java_gnome_jar,
+		"java-gnome library",
+		"java-gnome4.0",
+		"/usr/share/java/gtk.jar");
+
+	check_prereq(@dbus_java_jar,
+		"dbus-java library",
+		"java-dbus",
+		"/usr/share/java/dbus.jar");
+
+	check_prereq(@debug_disable_jar,
+		"matthew-debug disable library",
+		"java-debug",
+		"/usr/share/java/debug-disable.jar");
+
+	check_prereq(@debug_enable_jar,
+		"matthew-debug enable library",
+		"java-debug",
+		"/usr/share/java/debug-enable.jar");
+
+	check_prereq(@hexdump_jar,
+		"matthew-debug hexdump library",
+		"java-hexdump",
+		"/usr/share/java/hexdump.jar");
+
+	check_prereq(@unix_jar,
+		"Unix socket library",
+		"java-unix",
+		"/usr/share/java/unix.jar");
 } else {
 	bail "failed!", "This OS not configured with defaults!\nTHIS IS AN INTERNAL ERROR, PLEASE FILE A BUG.";
 }
@@ -999,6 +1034,15 @@ if ($os eq "gentoo") {
 
 	check_jar($jar, "$vendor jar", $jar_candidate, "");
 	check_javadoc($javadoc, "$vendor javadoc", $javadoc_candidate, "");
+} elsif ($os eq "cygwin") {
+	# check ecj, the standalone Eclipse compiler.
+#	check_compiler($ecj, "Eclipse ecj", which("ecj"), "-g -preserveAllLocals -nowarn -source 1.5 -target 1.5");
+
+	# check javac, the OpenJDK compiler (from jdk6-langtools)
+	check_compiler($javac, "OpenJDK javac", "/usr/bin/javac", "-g");
+
+	check_jar($jar, "Fastjar", "/usr/bin/fastjar", "");
+	check_javadoc($javadoc, "OpenJDK javadoc", "/usr/bin/javadoc", "");
 } else {
 	bail "failed!", "This OS not configured with a workable Java compiler checks!\nTHIS IS AN INTERNAL ERROR, PLEASE FILE A BUG.";
 }
@@ -1278,6 +1322,8 @@ if ($os eq "gentoo") {
 		$cacao_candidate = "/usr/bin/cacao";
 	}
 	check_runtime($cacao, "CACAO VM", $cacao_candidate, "");
+} elsif ($os eq "cygwin") {
+	check_runtime($jamvm, "JamVM VM", "/usr/bin/jamvm", "");
 } else {
 	bail "failed!", "This OS not configured with appropriate Java VM checks!\nTHIS IS AN INTERNAL ERROR, PLEASE FILE A BUG.";
 }
